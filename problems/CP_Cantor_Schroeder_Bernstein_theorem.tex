\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_Schroeder_Bernstein_theorem}
  \pcomment{from: S09.cp3t}
  \pcomment{edited by ARM 212/11}
  \pcomment{Jay: the proof of Schroeder-Bernstein must be preceeded by the
            definition of ``as small as'' in CP_relational_properties_table.
            My intuition says this problem can be reworked in terms of
            ``as big as'' to remove the dependence and neaten it up a bit.}
\end{pcomments}

\pkeywords{
  relations
  relational_properties
  mapping_lemma
  functions
  injections
  surjections
  bijections
  Schroeder_Bernstein
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
This problem provides a proof of the  [\idx{Schr\"oder-Bernstein}] Theorem:
\begin{equation}\label{SB_thm_surj}
\text{If $A \surj B$ and $B \surj A$, then $A \bij B$.}
\end{equation}

\bparts

\ppart It is OK to assume that $A$ and $B$ are disjoint.  Why?

\begin{solution}
  We can always find sets $A' \bij A$ and $B' \bij B$ such that $A'$ and
  $B'$ are disjoint.  For example, let $A' = A \cross \set{0}$ and $B' = B
  \cross \set{1}$.  Then if we prove~\eqref{SB_thm_surj} for $A'$ and
  $B'$, we could conclude it held for $A$ and $B$ because
\[
A \bij A' \bij B' \bij B.
\]
\end{solution}

\ppart Explain why there are total injective functions $f:A \to B$, and
 $g:B \to A$.

\begin{solution}
 $B \surj A$ means there is a surjective function $h:B \to A$, so
 $\inv{h}:A \to B$ will be a total injective relation.  Removing all but
 one $\inv{h}$-arrow out of each element of $A$, leaves a total injective
 \emph{function} $f:A \to B$.  Likewise for $g:B \to A$.
\end{solution}

\eparts

Picturing the diagrams for $f$ and $g$, there is \emph{exactly one} arrow
\emph{out} of each element---a left-to-right $f$-arrow if the element is in
$A$ and a right-to-left $g$-arrow if the element is in $B$.  This is because
$f$ and $g$ are total functions.  Also, there is \emph{at most one} arrow
\emph{into} any element, because $f$ and $g$ are injections.

So starting at any element, there is a unique, and unending path of arrows
going forwards.  There is also a unique path of arrows going backwards,
which might be unending, or might end at an element that has no arrow into
it.  These paths are completely separate: if two ran into each other,
there would be two arrows into the element where they ran together.

This divides all the elements into separate paths of four kinds:
\renewcommand\theenumi {\roman{enumi}}
\begin{enumerate}

\item paths that are infinite in both directions,
\item paths that are infinite going forwards starting from some element of
  $A$.
\item paths that are infinite going forwards starting from some element of
  $B$.
\item\label{cycle}  paths that are unending but finite.
\end{enumerate}
\renewcommand\theenumi {enumi}

\bparts

\ppart What do the paths of the last type~\eqref{cycle} look like?

\begin{solution}

An even-length cycle of alternating $f$- and $g$-arrows.

\end{solution}

\ppart Show that for each type of path, either
\begin{itemize}

\item the $f$-arrows define a bijection between the $A$ and $B$ elements
  on the path, or
\item the $g$-arrows define a bijection between $B$ and $A$ elements on
  the path, or

\item both sets of arrows define bijections.

\end{itemize}
For which kinds of paths do both sets of arrows define bijections?

\begin{solution}
 For paths that start at a point in $A$, there will be an
  $f$-arrow out of every point on the path, so the $f$-arrows will define
  a bijection from the $A$ elements to the $B$ elements on the path.  The
  $g$-arrows don't define a bijection the other way, because they don't
  hit the starting point.

For paths that start at a point in $B$, the $g$-arrows will define a bijection from
the $B$ elements to the $A$ elements, by the same reasoning.

For the other two types of path, every point $B$ element has exactly one
$f$-arrow coming in, so these arrows define a bijection from the $A$
elements to be $B$ elements.  Likewise, the $g$-arrows define a bijectin
the other way.

\end{solution}

\ppart Explain how to piece these bijections together to prove that $A$
and $B$ are the same size.
\begin{solution}

Define $h:A \to B$ by the rule:
\[
h(x) \eqdef
\begin{cases}
\inv{g}(a) & \text{if $a$'s path starts at a point in $B$},\\
f(a) &  \text{otherwise}.
\end{cases}
\]


\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
