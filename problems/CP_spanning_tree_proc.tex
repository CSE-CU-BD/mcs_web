\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_spanning_tree_proc}
  \pcomment{subsumes CP_Mark_a_spanning_tree}
  \pcomment{from: S09.cp6t; revised ARM 3/2/10}
  \pcomment{commented out in S09 so check/revise before using}
\end{pcomments}

\pkeywords{
  graphs
  spanning_trees
  state_machines
  derived_variables
  increasing
  decreasing
  termination
  trees
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}\mbox{} %latex artifact

\begin{quote}
\begin{center}
Procedure \textbf{create-spanning-tree}
\end{center}

Given a simple graph $G$, keep applying the following operations to the graph
until no operation applies:

\begin{enumerate}
\item If an edge $\edge{u}{v}$ of $G$ is on a simple cycle, then
  delete $\edge{u}{v}$.

\iffalse
there is an edge of $G$ between $u$ and $v$ and there is
also a path from $u$ to $v$ which does \emph{not} include this edge;
in this case, delete the edge $\edge{u}{v}$.
\fi

\item If vertices $u$ and $v$ of $G$ are not connected, then add the
  edge $\edge{u}{v}$.
\end{enumerate}

\end{quote}

Assume the vertices of $G$ are the integers $1,2,\dots,n$ for some $n
\geq 2$.  Procedure \textbf{create-spanning-tree} can be modeled as a
state machine whose states are all possible simple graphs with
vertices $1,2,\dots,n$.  The start state is $G$, and the final states
are the graphs on which no operation is possible.

\bparts

\ppart Let $G$ be the graph with vertices $\set{1,2,3,4}$ and edges
\[
\set{\edge{1}{2},\edge{3}{4}}
\]
What are the possible final states reachable from start state $G$?  Draw
them.

\begin{solution}
It's not possible to delete any edge.  The procedure can only
add an edge connecting exactly one of vertices 1 or 2 to exactly one of
vertices 3 or 4, and then terminate.  So there are four possible final
states.
\end{solution}

\ppart Prove that any final state of must be a tree on the vertices.

\begin{solution}
We use the characterization of a tree as an acyclic connected
graph.

A final state must be connected, because otherwise there would be two
unconnected vertices, and then a transition adding the edge between
them would be possible, contradicting finality of the state.

A final state can't have a simple cycle, because deleting any edge on the
cycle would be a possible transition.
\end{solution}

\ppart \label{derived} For any state, $G'$, let $e$ be the number of edges
in $G'$, $c$ be the number of connected components it has, and $s$ be the
number of simple cycles.  For each of the derived variables below, indicate
the \emph{strongest} of the properties that it is guaranteed to satisfy, no
matter what the starting graph $G$ is and be prepared to briefly explain
your answer.

The choices for properties are: \emph{constant}, \emph{strictly
increasing}, \emph{strictly decreasing}, \emph{weakly increasing},
\emph{weakly decreasing}, \emph{none of these}.  The derived variables are

\begin{enumerate}

\item[(i)] $e$ \begin{solution}
none of these
\end{solution}

\item[(ii)] $c$ \begin{solution}
weakly decreasing
\end{solution}

\item[(iii)] $s$ \begin{solution}
weakly decreasing
\end{solution}

\item[(iv)] $e-s$  \begin{solution}
weakly increasing
\end{solution}

\item[(v)] $c+e$  \begin{solution}
weakly decreasing
\end{solution}

\item[(vi)] $3c + 2e$  \begin{solution}
strictly decreasing
\end{solution}

\item[(vii)] $c+s$ \begin{solution}
strictly decreasing
\end{solution}

\item[(viii)] $(c,e)$, partially ordered coordinatewise (the
  \emph{product} partial order, Ch.~\bref{prodsec}).

\begin{solution}
    none of these
\end{solution}

\iffalse  %uncomment when well-founded order topic is included.
\item[(ix)] $(c,e)$, ordered lexicographically  \begin{solution}
strictly decreasing
\end{solution}
\fi

\end{enumerate}

\ppart Prove that procedure \textbf{create-spanning-tree} terminates.
(If your proof depends on one of the answers to part~\eqref{derived},
you must prove that answer is correct.)

\iffalse
by proving that one of the
derived variables above is strictly decreasing under some well founded
partial order.
\fi

\begin{solution}
  To show that the variable (vi) strictly decreases, note that
  the rule for deleting an edge ensures that the connectedness relation
  does not change, so neither does the number of connected components $c$.
  Meanwhile the number of edges $e$ decreases by one when an edge is
  deleted.  Therefore the variable $3c+2e$ decreases by $2$.  The rule for
  adding an edge ensures that the number of connected components $c$
  decreases by one and the number of edges $e$ increases by one.
  Therefore the variable $3c+2e$ decreases by $1$.

  To show that the variable (vii) strictly decreases, note that the rule
  for deleting an edge ensures that the number of connected components $c$
  does not change and the number of simple cycles $s$ decreases by $n$,
  where $n \geq 1$. Therefore the variable $c+s$ decreases by $n$.  The
  rule for adding an edge ensures that the number of connected components
  $c$ decreases by one and the number of simple cycles $s$ does not
  change.  Therefore the variable $c+s$ decreases by one.

  The variable (viii) is neither increasing nor decreasing since under
  the rule for adding an edge, the number of connected components $c$
  decreases by one and the number of edges $e$ increases by one.

\iffalse
To show that the lexicographically ordered $(c,e)$ strictly decreases,
note that the rule for deleting an edge ensures that the number of
connected components $c$ does not change and the number of edges $e$
decreases by one.  The rule for adding an edge ensures that the number of
connected components $c$ decreases by one.
\fi

\end{solution}


\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
