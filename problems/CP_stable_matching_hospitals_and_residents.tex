\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_stable_matching_hospitals_and_residents}
  \pcomment{edited ARM 4/6/15}
  \pcomment{Added by Oshani on Prof. Meyer's instructions 03/16/11}
  \pcomment{subsumes PS_stable_matching_hospitals from S08.ps4}
\end{pcomments}

\pkeywords{
 stable_matching
 stable_marriage
 residents
 hospital
 }

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
The most famous application of stable matching was in assigning
graduating medical students to hospital residencies.  Each hospital
has a preference ranking of students, and each student has a
preference ranking of hospitals, but unlike finding stable marriages
between an equal number of boys and girls, hospitals generally have
differing numbers of available residencies, and the total number of
residencies may not equal the number of graduating students.

Explain how to adapt the Stable Matching problem with an equal number
of boys and girls to this more general situation.  In particular,
modify the definition of stable matching so it applies in this
situation, and explain how to adapt the Mating Ritual to handle it.

\begin{solution}
A \term{matching} is an assignment of medical students to residencies
in each of the hospitals (an injection, $A: \text{students} \to
\text{residencies}$) such that every student has a residency ($A$ is
total), or every residency has an assigned student ($A$ is a
surjection).  An assignment, $A$, is \term{stable} when it has no
\emph{rogue couples}, where a rogue couple is a hospital student pair
$(H,S)$ such that
\begin{itemize}

\item $S$ has no residency assignment ($S \notin \domain{A}$), or the residency
  $A(S)$ is at a hospital $S$ likes less then $H$, and

\item $H$ has an unassigned residency (a residency at $H$ that is not
  in $\range{A}$), or $H$ prefers $S$ to one of its assigned students
  (there is a student $S'$ such that $A(s')$ is at $H$ and $H$ prefers
  $S$ to $S'$).
\end{itemize}

In the modified Mating Ritual for this situation---with students
playing the role of boys and hospitals as girls---boys apply (propose)
as usual to their favorite hospital, but a hospital with $k$
residencies rejects all but their $k$ most favored students.
\end{solution}

\end{problem}

\endinput
