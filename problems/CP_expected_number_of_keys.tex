\documentclass[problem]{mcs}

\begin{pcomments}
\pcomment{CP_expected_number_of_keys}
\pcomment{from: S08.cp14m excerpted from F07.ps11}
\end{pcomments}

\pkeywords{
  random_variables
  expectation
  indicator_variable
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{problem}
A man has a set of $n$ keys, one of which fits the door to his apartment.
He tries the keys until he finds the correct one.  Give the expectation
for the number of keys he tries if

\bparts

\ppart he tries the keys at random (possibly repeating a key tried
earlier)

\begin{solution}
This is a mean time to failure problem if finding a key is taken
to be a ``failure''.  The probability of failure on the $i$th try, given
``success'' on the previous tries, is $1/n$, so if $T$ is the number of
tries to find the right key, then $\expect{T} = 1/(1/n) =n$.
\end{solution}

\ppart he chooses keys randomly from among those he has not yet tried.

\begin{solution}
$T=k$ means that the man picks the wrong key on the first trial, and he
picks the wrong key on the second trial, etc, and he picks the right key on
the $k$-th trial.  Let $K_i$ be the indicator random variable for the $i$th
trial, namely, $K_i=1$ if he picks the right key on the $i$th trial, and $0$
otherwise.  Then
\[
\pr{T=k} = \pr{K_1=0\ \&\ K_2=0\ \&\cdots\&\ K_{k-1}=0\ \&\ K_k=1}
\]
By the Product Rule (Section~\bref{product_rule_subsec}) we can compute
\begin{align*}
\pr{T=k}
= & \pr{K_1=0} \prcond{K_2=0}{K_1=0} \prcond{K_3=0}{K_1=0\ \&\ K_2=0} \cdots\\
  & \qquad \cdots \prcond{K_k=1}{K_1=0\ \&\cdots\&\ K_{k-1}=0}\\
= & \frac{n-1}{n}\ \frac{n-2 }{n-1}\
\frac{n-3 }{n-2}\ \cdots\ \frac{n-k+1}{n-k+2}\ \frac{1}{n-k+1}\\
= & \frac{1}{n}
\end{align*}
So
\[
\expect{T} = \sum_{k=1}^n k \cdot \pr{T=k}  = \frac{1}{n}\sum_{k=1}^n{k} = \frac{n+1}{2}.
\]
\end{solution}

\eparts
\end{problem}
