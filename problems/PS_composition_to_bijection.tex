\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_composition_to_bijection}
  \pcomment{by estick from: S02.ps3}
  \pcomment{total function f added by ARM 2/22/12}
\end{pcomments}

\pkeywords{
  composition
  surjection
  injection
  bijection
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}

Let $f: A \to B$ and $g: B \to C$ be functions.

\iffalse
The composed function $g \circ f$ has domain $A$, range $C$, and is
defined by $(g \circ f)(a) = g(f(a))$.
\fi

\bparts
  
\ppart Prove that if the composition $g \compose f$ is a bijection,
then $f$ is a total injection and $g$ is a surjection.

\begin{solution}

\begin{proof}

\begin{staffnotes}
An explanation in terms of arrows would be clearer.  Tell students that it's
OK to do an ``archery'' proof, but make sure their argument is sound
and clear.
\end{staffnotes}
%Archery solution
Let $h= g\compose f$. Suppose that $h$ is a bijection.
We remind that by definition of $h$ if there is an $h$-arrow from some element $a\in A$ to $c\in C$, then there exists an element $b\in B$ such that there is an $f$-arrow from $a$ to $b$ and there is an $g$-arrow from $b$ to $c$. 
As $h$ is bijective, then it is total,  injective and surjective. 

We first show that $f$ is total. Consider some $a\in A$. As $h$ is total, there is an $h$-arrow departing from $a$. Thus, there exists a $b$ such that there is an $f$-arrow from $a$ to $b$. Then, for any $a\in A$ there is at least one $f$-arrow departing from it, so $f$ is total.

Second, we show that $f$ is injective. Assume by contradiction that $f $ is not injective. Then, there is a $b\in B$ and two distinct elements $a_1,a_2\in A$, such that there is an $f$-arrow from both $a_1,a_2$ to $b$. 
As $h$ is a total function, there exists $c_1,c_2$ such that there is an $h$-arrow from $a_1$ to $c_1$, and another from $a_2$ to $c_2$. Moreover, as $h$ is injective $c_1$ and $c_2$ must be different.
Thus, there must be an $f$-arrow from $a_1$ to $b$ and a $g$-arrow from $b$ to $c_1$, and there must be an $f$-arrow from $a_2$ to $b$ and a $g$-arrow from $b$ to $c_2$. 
As $c_1,c_2$ are diffferent, there are at least two $g$-arrows departing from $b$. This contradicts the fact that $g$ is a function.

Finally, we show that $g$ is surjective. Consider some $c\in C$. As $h$ is surjective, there exists an $a\in A$ such that there is an $h$-arrow from $a$ to $c$. Thus, there exists a $b\in B$ such that there is an $g$-arrow from $b$ to $c$. Then, there is at least one $g$-arrow arriving to any $c\in C$, so $g$ is  surjective.

%Suppose that $g \compose f$ is a bijection.
%
%Then $f$ must be total, since if $f(a)$ is undefined for some $a \in
%A$, then so is $g(f(a)) = (g \compose f)(a)$, contradicting the fact
%that $g \compose f$ is a bijection.
%
%Now assume for the purpose of contradiction that $f$ is not an
%injection.  Then there exist \emph{distinct} elements $a_1, a_2 \in
%A$, such that $f(a_1) = f(a_2)$.  This implies that $g(f(a_1)) =
%g(f(a_2))$.  Therefore, $g \compose f$ is not an injection and thus
%not a bijection.  This is a contradiction; therefore, $f$ must be an
%injection.
%
%Now assume for the purpose of contradiction that $g$ is not a
%surjection.  Then there exists an element $c \in C$ such that for all
%$b \in B$, $g(b) \neq c$.  Therefore, for all $a \in A$, $g(f(a)) \neq
%c$.  This implies that $g \compose f$ is not a surjection and thus not a
%bijection.  This is again a contradiction; therefore, $g$ must be a
%surjection.
\end{proof}
\end{solution}

\problempart Show there is a total injection, $f$, and a bijection,
$g$, such that $g \compose f$ is not a bijection.

\begin{solution}
Here is an example:
\begin{align*}
A & = \set{ 1 } \\
B & = \set{ 1, 2 } \\
C & = \set{ 1, 2 } \\[\smallskipamount]
f(x) & \eqdef x \\
g(x) & \eqdef x
\end{align*}
\end{solution}

\eparts

\end{problem}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
