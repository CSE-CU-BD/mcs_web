\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_box_unstacking}
  \pcomment{from: S09 notes}
\end{pcomments}

\pkeywords{
  induction
  ordinary_induction
  potential
  invariance
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Define the \term{potential}, $p(S)$, of a stack of blocks, $S$, to be
$k(k-1)/2$ where $k$ is the number of blocks in $S$.  Define the
potential, $p(A)$, of a set of stacks, $A$, to be the sum of the
potentials of the stacks in $A$.

Generalize Theorem~\bref{stacking} about scores in the stacking game to
show that for any set of stacks, $A$, if a sequence of moves starting
with $A$ leads to another set of stacks, $B$, then $p(A) \geq p(B)$, and
the score for this sequence of moves is $p(A)-p(B)$.

\hint Try induction on the number of moves to get from $A$ to $B$.

\begin{solution}
\begin{proof}

The proof is by ordinary induction on the number of moves, $n$.
The induction hypothesis will be
\begin{quote}
$P(n) \eqdef$ If $n$ moves from a set of stacks, $A$, leads to a set
  $B$ of stacks, then $p(A) \geq p(B)$ and the score for these $n$
  moves is $p(A)-p(B)$.
\end{quote}

\textbf{Base case:} ($n$ = 0) This means no moves have been made and
$B=A$, so it's obvious that $P(0)$ holds.

\textbf{Inductive step:} Assume that $P(n)$ is true for some $n \in
\naturals$, and suppose $A$ leads to $B$ in $n+1$ moves.  This means
that $A$ leads to some set of stacks, $A_1$, and $A_1$ leads to $B$ in
$n$ steps.  So the inductive hypothesis $P(n)$ implies that $p(A_1)
\geq p(B)$ and the score for going from $A_1$ to $B$ is $p(A_1)-p(B)$.

So all we have to do is show that the score for the single move from
$A$ to $A_1$ is $p(A)-p(A_1) > 0$.  The only difference between $A$
and $A_1$ is that some stack $S \in A$ of size $k>1$ splits into two
stacks of sizes $k_1,k_2 \geq 1$ where $k = k_1+k_2$. The score for
such a move is $k_1k_2$.  Also,
\[
p(S) = \frac{(k_1+k_2)((k_1+k_2)-1)}{2} =
\frac{(k_1^2+ 2k_1k_2+k_2^2)-(k_1 + k_2)}{2},
\]
and the potential of the two stack sets is the sum of their potentials, namely,
\[
\frac{k_1(k_1-1) + k_2(k_2-1)}{2} = \frac{k_1^2 + k_2^2 -(k_1 + k_2)}{2},
\]
So the difference between these potentials equals $k_1k_2>0$, and this is
indeed equal to the score of the move.

\end{proof}

\end{solution}

\end{problem}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
