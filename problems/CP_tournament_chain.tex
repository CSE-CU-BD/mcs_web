\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_tournament_chain}
  \pcomment{from ps4.S10}
  \pcomment{substantially revised by ARM 3/8-10/11}
  \pcomment{by ARM 10/17/09 but I saw it somewhere}
\end{pcomments}

\pkeywords{
  digraphs
  relations
  ranking
  tournament
  rationals
  path
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem} %\textbf{Tournament Graphs}

%  \newcommand{\beats}{\!\rightarrow\!}

  In a round-robin tournament, every two distinct players play against
  each other just once.  For a round-robin tournament with no
  tied games, a record of who beat whom can be described with a
  \term{tournament digraph}, where the vertices correspond to players
  and there is an edge $\diredge{x}{y}$ iff $x$ beat $y$ in their
  game.

  A \term*{ranking} is a path that includes all the players.  So in a
  ranking, each player won the game against the next lowest ranked
  player, but may very well have lost their games against much lower
  ranked players ---whoever does the ranking can have a lot of room to
  play favorites.
  
\begin{staffnotes}
 Paths used to be called ``simple paths'' or ``\emph{directed} simple
 paths.''
\end{staffnotes}

\bparts

\ppart Give an example of a tournament digraph with more than one
ranking.

\begin{solution}
  Let $n=3$ with edges $\diredge{u}{v}$, $\diredge{v}{w}$ and
  $\diredge{w}{u}$.  Then both~$u,v,w$ and $v,w,u$ are rankings.
\end{solution}

\ppart Prove that if a tournament digraph is a DAG, then it has at
most one ranking.

\begin{solution}
The most direct proof goes as follows: given a ranking in a tournament
graph, if $u$ ranks higher than $v$, and $v$ ranks higher than $w$,
then if $w$ beat $u$ in their game, there would be a length-3 cycle
from $u$ to $v$ to $w$ and back to $u$.  So in a tournament
\emph{DAG}, higher ranking players must have beaten all lower ranking
players.  This of course is the same as saying that all lower ranking
players were beaten by all higher ranking players.  So there is no
choice on how to rank a player: if the player lost $k$ matches, they
must be the $k+1$st ranked player.

Another straighforward proof is by contradiction.  Suppose that there
are two rankings for the graph.  Since the rankings differ, there must
be two players~$u \neq v$ such that~$u$ ranks higher than $v$ in one
ranking and lower than $v$ in the other ranking.  So one ranking gives
a path from~$u$ to $v$ and the other ranking gives a path from $v$
to~$u$.  Merging these paths gives a closed \emph{walk} from~$u$
to~$u$ that goes through $v$.  \textcolor{red}{\emph{A common mistake
    at this point was to assume that this closed walk was a cycle, but
    it may not be (see Problem~\bref{PS_shortest_directed_closed_walk})}} Since
$v \neq u$, this walk has positive length, and
Lemma~\bref{shortestclosedwalk_lem} implies that there is a positive
length cycle from $u$ to $u$ (somewhere, not necessarily including
$v$).  This contradicts the fact that the graph is a DAG, which
completes the proof by contradiction.

Another way to close the loophole above without appeal to
Lemma~\bref{shortestclosedwalk_lem} is to observe that in a tournament
graph, there must be an \emph{edge} in one direction or the other
between $u$ and $v$.  So say the edge is $\diredge{u}{v}$.  Then this
edge merged with the path from $v$ to $u$ must be a positive length
cycle.\footnote{If this isn't obvious to you, take a moment to think
  again about what's going on here ---because it \emph{is} obvious.}

By the way, yet another workable approach to this problem is by
induction on the number of vertices, but enough is enough.

\end{solution}

\ppart\label{hasrank} Prove that every finite tournament digraph has a
ranking.

\begin{staffnotes}
\hint Induction on the size of the tournament.  Could also rephrase
the proof below by considering a maximum length ranking (there is one
by WOP applied to $\#\text{players} - \text{ranking length}$).
\end{staffnotes}

\begin{solution}
By induction on $n$ with induction hypothesis
\[
P(n) \eqdef \text{every tournament digraph with $n$ vertices has a
  ranking.}
\]
 
\textbf{base case} $n=1$:  Trivial.

\textbf{inductive step}: Let $G$ be a tournament digraph with $n+1$
vertices.  Remove one vertex,~$v$, to obtain the subgraph, $H$, with the
$n$ remaining vertices.  Clearly, $H$ is also a tournament digraph, so by
induction hypothesis it has a ranking.  Now if the last player in this
$H$-ranking beat player~$v$, then~$v$ can be added at the end to form a
ranking in $G$.  On the other hand, if~$v$ beat the last player in the
$H$-ranking, then there will (by WOP) be a first player in the $H$-ranking
that~$v$ beats.  Inserting~$v$ just before that first player gives a
ranking for $G$.  Since $G$ was an arbitrary $n+1$ vertex tournament
graph, we conclude that $P(n+1)$ holds, which completes the proof.
\end{solution}

\ppart Prove that the greater-than relation, $>$, on the
rational numbers, $\rationals$, is a DAG and a tournament graph
that has no ranking.

\begin{staffnotes}
Intervene if teams start to spend much time on this part.  Tell them
we mostly will focus on finite graphs, and in general, infinite
counter-examples like this are not particularly important.

On the other hand, to really understand a proof, you need to be aware
where the proof depends on finiteness (whether it needs to or not).
\end{staffnotes}

\begin{solution}
  The $>$-relation defines a tournament graph on $\rationals$ since for
  every two rationals, $r \neq s$, either $r > s$, so there is an edge
  from $r$ to $s$, or $r< s$, so there is an edge from $s$ to $r$.  It
  cannot have any positive length cycles, since any $r$ on a positive
  length cycle would be less than itself.

Now in any tournament graph, vertex~$u$ can come before vertex~$v$ in
some ranking only if there is a path from~$u$ to~$v$.  This implies
that if $r > s$, then $r$ must come before $s$ in \emph{any} ranking
of $\rationals$.

So suppose there was a ranking of $\rationals$ and $\diredge{r}{s}$
was an edge on the path.  This implies that $r >s$.  Now let $t$ be
any rational such that $r>t>s$.  Now in a ranking, $t$ must come
before $r$ or after $s$, which implies $t >r$ or $s>t$, a
contradicting the choice of $t$.  SO there cannot be a ranking of the 
$\rationals$ tournament.
\end{solution}

 \eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
