\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{PS_Euler_circuits}
  \pcomment{undirected version of PS_directed_Euler_circuits}
  \pcomment{solns could use some editing as in PS_directed_Euler_circuits}
  \pcomment{from: S09.ps5; F06.rec6 (revised by ARM)}
\end{pcomments}

\pkeywords{
  Euler
  Euler_circuit
  Euler_tour
  cycle
  degree
  walk
  closed_walk
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  In this problem we'll consider some special closed walks
  called \term*{Euler tours}, named after the famous mathematician
  Leonhard Euler.  (Same Euler as for the constant $e\approx
  2.718$---he did a lot of stuff.)

\begin{definition*}
  An Euler tour of a graph is a walk that traverses every edge
  exactly once.
\end{definition*}

Does the graph in the following figure contain an Euler tour?

\begin{figure}
\graphic{example}
\end{figure}

Well, if it did, the edge $(E, F)$ would need to be included.  If the walk
does not start at $F$ then at some point it traverses edge $(E,F)$, and
now it is stuck at $F$ since $F$ has no other edges incident to it and an
Euler tour can't traverse $(E,F)$ twice.  But then the walk could not
be a tour.  On the other hand, if the walk starts at $F$, it must then
go to $E$ along $(E,F)$, but now it cannot return to $F$.  It again cannot
be a tour. This argument generalizes to show that if a graph has a
vertex of degree $1$, it cannot contain an Euler tour.

\begin{staffnotes}
On the other hand, it is easy to see that any cycle has an Euler
tour. You can just start at any vertex and walk around back to it.
\end{staffnotes}

So how do you tell in general whether a graph has an Euler tour?  At
first glance this may seem like a daunting problem (the similar
sounding problem of finding a cycle that touches every vertex exactly
once is one of those million dollar NP-complete problems known as the
\term{Traveling Salesman Problem})---but it turns out to be easy.

\bparts

\ppart Show that if a graph has an Euler tour, then the degree of each
of its vertices is even.

\begin{solution}
Let tour $C \eqdef v_1, v_2, \dots, v_r, v_1$ be an Euler
    tour.  Consider any vertex $v$.  Then every time $v$ occurs in
    $C$, there is a vertex $a$ which comes immediately before $v$ and a
    vertex $b$ which comes immediately after $v$.  Note that this holds for
    $v = v_1$ as well since $C$ is a tour. Moreover, $(a,v)$ and
    $(v,b)$ must be distinct edges of $G$ since $C$ is an Euler tour.
    It follows that if $v$ occurs $s$ times in $C$, then it has degree
    $2s$ since every edge incident to $v$ occurs in $C$ exactly once.
    Thus, $v$ has even degree.
\end{solution}
\eparts

In the remaining parts, we'll work out the converse: if the degree of
every vertex of a connected finite graph is even, then it has an Euler
tour.  To do this, let's define an Euler \term{walk} to be a walk that
traverses each edge \emph{at most} once.

\bparts

\ppart\label{conn-undirected} Suppose that an Euler walk in a connected graph
does not include every edge.  Explain why there must be an unincluded
edge that is incident to a vertex on the walk.

\begin{solution}
If either end of the untraversed edge is on the Euler walk, that
  already is the desired edge.  So suppose there's an untraversed edge,
  $e$, both of whose endpoints are not on the Euler walk.  Since the graph
  is connected, there must be a shortest walk, $P$, from an endpoint of
  $e$ to a vertex on the Euler walk.  Then all the edges on $P$ must be
  untraversed (or $P$ could be shortened), so the last edge traversed by
  $P$ will be the desired edge.
\end{solution}

\eparts

In the remaining parts, let $\walkv{w}$ be the \emph{longest} Euler
walk in some finite, connected graph.

\bparts

\ppart\label{cycle-circuit-undirected} Show that if $\walkv{w}$ is a closed walk, then
it must be an Euler tour.

\hint part~\eqref{conn-undirected}

\begin{solution}
Suppose an edge was not traversed by $\walkv{w}$.  By part~\eqref{conn-undirected},
  there must be a vertex on $\walkv{w}$ incident to an edge not traversed by $\walkv{w}$.
  Starting at this vertex, go around $\walkv{w}$ back to that vertex, and then the
  follow the edge.  This makes a longer Euler walk, contradicting the
  maximality of $\walkv{w}$.  So no edge can be missing from $\walkv{w}$.
\end{solution}

\ppart\label{already-undirected} Explain why all the edges incident to the end of $\walkv{w}$
must already have been traversed by $\walkv{w}$.

\begin{solution}
Otherwise we could extend $\walkv{w}$ to a longer Euler walk with any
  edge from the end not already traversed by $\walkv{w}$.
\end{solution}

\ppart\label{odd-undirected} Show that if the end of $\walkv{w}$ was not equal to the start
of $\walkv{w}$, then the degree of the end would be odd.

\hint part~\eqref{already-undirected}

\begin{solution}
Let $v$ be the end vertex of $\walkv{w}$.  Given that $v$ is not the
  start of $\walkv{w}$, it follows that at any occurrence of $v$ in $\walkv{w}$ other than
  at the end, $\walkv{w}$ would enter and leave that occurrence of $v$ traversing
  a pair of edges.  Since $\walkv{w}$ is an Euler walk, all the edges in all these
  pairs are distinct.  In addition, the final edge traversed by $\walkv{w}$ as it
  ends at $v$ is distinct from all the paired edges.  Altogether, this
  imples that there are an odd number of edges traversed by $\walkv{w}$ and
  incident to $v$.  But by part~\eqref{already-undirected}, these are all the edges
  incident to $v$, proving that $v$ has odd degree.
\end{solution}

\ppart Conclude that if every vertex of a finite, connected graph has even
degree, then it has an Euler tour.

\begin{solution}
If all vertices in $G$ have even degree, then by part~\eqref{odd-undirected}, the
only possibility is that the end of $\walkv{w}$ equals the start, that
is, $\walkv{w}$ is closed.  So by part~\eqref{cycle-circuit-undirected},
$\walkv{w}$ is an Euler tour.
\end{solution}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
