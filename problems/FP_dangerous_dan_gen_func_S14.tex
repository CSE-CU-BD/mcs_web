\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{FP_dangerous_dan_gen_func_S14}
  \pcomment{forked from FP_dangerous_generating_func}
\end{pcomments}

\pkeywords{
  generating_function
  convolution
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Every day in the life of Dangerous Dan is a potential {disaster} filled with \emph{mishaps.} 

\begin{itemize}

\item Dan may or may not \emph{spill} his breakfast cereal on his computer
keyboard.

% \item Dan may or may not fall down the front steps on his way out the
% door.

%\item Dan \emph{stubs} his toe zero or more times.

\item Dan \emph{blurts} something foolish an even number of times.

\item Dan \emph{breaks} a sequence of two or more dinnerware items
  (where each item is either a bowl or a plate or a cup.)

\end{itemize}

Let $T_n$ be the number of different combinations of $n$ mishaps that Dan
can suffer in one day (where we regard different sequences of
dinnerware breaks as different mishaps). 

% For example, $T_3 = 7$, because there are
% seven possible combinations of three mishaps:
% %
% \[
% \begin{array}{rccccccc}
% \text{spills} & 0 & 1 & 0 & 1 & 1 & 0 & 0 \\
% %\text{falls}  & 0 & 0 & 1 & 1 & 0 & 1 & 0 \\
% \text{stubs}  & 3 & 2 & 2 & 1 & 0 & 0 & 1 \\
% \text{blurts} & 0 & 0 & 0 & 0 & 2 & 2 & 2
% \text{breaks} & 0
% \end{array}
% \]

\bparts

\ppart Express the generating function 
\[
T(x) \eqdef T_0 + T_1x + T_2x^2 + T_3x^3 + \cdots
\]
as a quotient of polynomials.

\begin{center}
\exambox{2.0in}{1.0in}{-0.4in}
\end{center}

\examspace[3.0in]

\begin{solution}
\begin{align*}
T(x) & = \underbrace{(1+x)}_{\text{spills}}\\
    &\ \cdot \underbrace{(1 + x^2 + x^4 + \cdots)}_{\text{blurts}}\\
     &\ \cdot \underbrace{(3^2x^2 + 3^3x^3 + 3^4x^4 +
       \cdots)}_{\text{dinnerware breaks}}\\
     & = (1+x) \cdot \frac{1}{1 - x^2} \cdot
        \frac{9x^2}{1-3x} \\
     & = (1+x) \cdot \frac{1}{(1-x)(1+x)} \cdot
        \frac{9x^2}{1-3x}\\
     & =  \frac{9x^2}{(1 - x)(1-3x)}.
\end{align*}
\end{solution}

\ppart Put rational numbers in the boxes that make this equation true:
%
{
\[
g(x) = 9x^2 \left(\frac{\frame{\rule{0.75in}{0in}\rule{0in}{0.75in}}}{1-3x}
     + \frac{\frame{\rule{0.75in}{0in}\rule{0in}{0.75in}}}{(1-x)}\right)
\]}

\examspace[3in]

\begin{solution}
$3/2, -1/2$.
\end{solution}

\ppart Prove that the closed form expression for $T_n$ is given by:
\[
T_n = \frac{3^{n+1} - 3^2}{2} .
\]

\begin{solution}
Perform a partial fraction expansion of the quotient of polynomials
derived in the previous part:
\[
T(x) = 9x^2 \left(\frac{3/2}{1-3x} - \frac{1/2}{1-x} \right) .
\] 
Therefore, 
\begin{align*}
T_n &= 9 \left([x^{n-2}] \frac{3/2}{1-3x} - [x^{n-2}]
\frac{1/2}{1-x} \right) \\
  &= 9\left(\frac{3}{2} \cdot 3^{n-2} - \frac{1}{2} \cdot 1\right) \\
  &= \frac{3^{n+1} - 3^2}{2} .
\end{align*}
\end{solution}

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
