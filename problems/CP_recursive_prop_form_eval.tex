\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_recursive_prop_form_eval}
  \pcomment{ARM 3/2/16}
\end{pcomments}

\pkeywords{
  propositional formula
  recursive
  environment
  structural_induction
  induction
  evaluate
}

\newcommand{\vrbls}[1]{\mopt{vars}(#1)}
\newcommand{\ANDsym}{\ensuremath{\mathbin{\mathrm{\textbf{And}}}}}
\newcommand{\NOTsym}{\ensuremath{\mathop{\mathrm{\textbf{Not}}}}}

\begin{problem}
In this problem we'll need to be careful about the propositional
\emph{operations} on truth values and connective \emph{symbols} that
appear in formulas.  We'll restrict ourselves to formulas with
connective \emph{symbols} \ANDsym\ and \NOTsym, since we know every
propositional formula is equivalent to one with only these
connectives.

\bparts

\ppart Give a simple recursive definition of \emph{propositional
  formula} and the set of propositional \emph{variables that appear}
in it.

\begin{solution}

\inductioncase{Base cases:}
\begin{itemize}

\item A propositional \emph{variable}, $P$, is a propositional formula
  and the set $\vrbls{P}$ of variables that appear in it is $\set{P}$.

\item A propositional \emph{constants} \True, \False\ are propositional
  formulas, and
\[
\vrbls{\True} = \vrbls{\False} \eqdef \emptyset.
\]

\end{itemize}

\inductioncase{Constructor cases:} If $F,G$ are propositional
formulas, then so are
\begin{itemize}

\item $(F \ANDsym\ G)$, and $\vrbls{(F \ANDsym G)} \eqdef \vrbls{F} \union
  \vrbls{G}$.

\item $\NOTsym(F)$, and $\vrbls{\NOTsym(F)} \eqdef \vrbls{F}$.
\end{itemize}
\end{solution}

\eparts

Let $V$ be a set of propositional variables.  A \emph{truth
  environment} $e$ over $V$ assigns truth values to all these
variables.  In other words, $e$ is a total function,
\[
e: V \to \set{\true,\false}.
\]

\bparts

\ppart Give a recursive definition of the \emph{truth value},
$\meval{F}{e}$, of propositional formula $F$ in an environment $e$
over a set of variables $V \supseteq \vrbls{F}$.

\begin{solution}

\inductioncase{Base cases:}
\begin{align*}
\meval{P}{e} & \eqdef e(P)\\
\meval{c}{e} & \eqdef c \text{ for } c = \True, \False.
\end{align*}

\inductioncase{Constructor cases:} If $F,G$ are propositional
formulas, then
\begin{align*}
 \meval{(F \ANDsym G)}{e} & \eqdef  \meval{F}{e} \QAND\ \meval{G}{e},\\
 \meval{\NOTsym(F)}{e} & \eqdef  \QNOT(\meval{F}{e}).
\end{align*}
\end{solution}
\eparts

Clearly the truth value of a propositional formula only depends on the
truth values of the variables in it.  How could it be otherwise?  But
it's good practice to work out a rigorous definition and proof of this
assumption.

\bparts

\ppart Give a rigorous definition of the assertion that ``the truth
value of a propositional formula only depends on the truth values of
the variables that appear in it,'' and then prove it by structural
induction on the definition of propositional formula.

\hint Think about two different environments whose values agree on the
variables in a formula.

\begin{solution}
\begin{definition*}
The truth value of a propositional formula $F$ \emph{depends only on
  the truth values of $\vrbls{F}$} iff

\begin{itemize}
\item $V_1$ and $V_2$ are sets of variables,
\item $e_1$ and $e_2$ are environments for $V_1$ and $V_2$, respectively,
\item $V_1 \intersect V_2 \supseteq \vrbls{F}$, and
\item $\forall P \in \vrbls{F}.\, e_1(P) = e_2(P)$,
\end{itemize}
\[
\text{implies that }\meval{F}{e_1} = \meval{F}{e_2}.
\]
\end{definition*}

To prove that the value of a $F$ depends only on the values of $\vrbls{F}$, suppose
$V_1,V_2,e_1,e_2$ are as above, then

\inductioncase{Base case} ($F$ is a variable $P$).   Then
\begin{align*}
\meval{F}{e_1} & \eqdef e_1(P)\\
  & = e_2(P) & \text{(by hypothesis)}\\
  & = \meval{F}{e_2} & \text{(by def of eval)}
\end{align*}

\inductioncase{Base case} ($F$ is a constant \True).   Then
\[
\meval{F}{e_1} = \meval{\True}{e_1} \eqdef \true = \meval{F}{e_2},
\]
and likewise for \False.

\inductioncase{Constructor case} ($F$ is $(G \ANDsym H)$).  Then by
structural induction hypothesis,
\begin{align*}
\meval{G}{e_1} & = \meval{G}{e_2}\\
\meval{H}{e_1} & = \meval{H}{e_2}, 
\end{align*}
so
\begin{align*}
\meval{F}{e_1}
  & = \meval{(G \ANDsym H)}{e_1}\\
  & = \meval{G}{e_1} \QAND\ \meval{H}{e_1}
     & \text{(def of eval)}\\
  & = \meval{G}{e_2} \QAND\ \meval{H}{e_2}
     & \text{(ind. hypothesis)}\\
  & = \meval{(G \ANDsym H)}{e_2}
     & \text{(def of eval)}\\
  & = \meval{F}{e_2}.
\end{align*}

\inductioncase{Constructor case} ($F$ is $\NOTsym(G)$).  Similar,
easier proof.
\end{solution}

\ppart Prove by structural induction that if $F$ and $G$ are valid,
then so in $F \ANDsym G$.

\TBA{\dots}

\ppart Prove by structural induction that a formula $F$ is valid iff
$\NOTsym(F)$ is unsatisfiable.

\begin{solution}
Let $e$ range over environments on $\vrbls{F}$.

\begin{align*}
F \text{is valid} 
   &  \qiff \forall e.\, \meval{F}{e} = \true\\
   &  \qiff \forall e.\, \QNOT(\meval{F}{e}) = \false
       & \text{(by def of operation $\QNOT$)}\\
   & \qiff  \forall e.\, \meval{\NOTsym(F)}{e} = \false
       & \text{(by def of $\meval$)}\\
   & \qiff  \QNOT(\exists e.\,\meval{\NOTsym(F)}{e} = \true)
       & \text{(De Morgan)}\\
   & \qiff \NOTsym(F) \text{ is unsatisfiable}
       & \text{(def of unsatisfiable)}.
\end{align*}
\end{solution}

\eparts

\end{problem}

\endinput
