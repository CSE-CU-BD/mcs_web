\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_pred_calc_model_N_arrows}
  \pcomment{ARM 2/17/6}
\end{pcomments}

\pkeywords{
  predicate
  logic
  nonnegative
  model
  arrow
}

\newcommand{\zerosym}{\textbf{\~#1}}
\newcommand{\nextsym}{\textbf{next}}
\newcommand{\nextfun}{\textit{nextf}}
\newcommand{\prevsym}{\textbf{prev}}
\newcommand{\prevfun}{\textit{prevf}}
\newcommand{\numerl}[1]{\text{\~#1}}
\newcommand{\nextarrow}{\stackrel{\nextsym}{\longrightarrow}}
\newcommand{\prevarrow}{\stackrel{\prev}{\longleftarrow}}
\newcommand{\nparrow}{\stackrel{\nextarrow}{\prevarrow}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Let $\zerosym$ be a constant symbol, $\nextsym$ and $\prevsym$ be
function symbols taking one argument.

We can picture any model for these symbols by representing domain
elements as points.  The model must interpret $\zerosym$ as some point
$e_0$.  It also interprets the symbols $\nextsym$ and $\prevsym$ as
total functions $\nextfun$ and $\prevfun$ on the domain.  We can
picture the functions by having an arrow labelled $\nextsym$ go out
from each point $e$ into the point $\nextfun(e)$, and an arrow
labelled $\prevsym$ go out from each $e$ into $\prevfun(e)$.  In
particular,
\begin{quote}
every point has exactly one $\nextsym$-arrow, and exactly one
$\prevsym$-arrow, going out of it.
\end{quote}

The aim of this problem is to develop a series of predicate formulas
using just the symbols $\zerosym$, $\nextsym$ and $\prevsym$ such that
every model satisfying these formulas will contain contain a copy of
the consecutive nonnegative integers $\naturals$.  That is, the domain
of the model includes an infinite sequence of distinct points starting
with $e_0$, with a $\next$-arrow going from each point to the next in
the sequence:
\[
e_0 \nextarrow e_1 \nextarrow e_2 \nextarrow  \dots \nextarrow e_n \nextarrow \dots.
\]
That is, $\nextfun$ acts like plus one.  We also want $\prevfun$ to act
like minus one: whenever a $\next$-arrow goes into an element $e$,
then the $\prev$-arrow out of $e$ goes back to the beginning of the
$\next$-arrow:
\begin{equation}\label{Ncopyshape}
e_0 \nparrow e_1 \nparrow e_2 \nparrow  \dots \nparrow e_n \nparrow \dots.
\end{equation}

There is a simple way to express this requirement as a predicate
formula:
\begin{equation}\label{previnvnext}
\forall x.\, \prevsym(\nextsym(x)) = x\ .
\end{equation}
Formula~\eqref{previnvnext} means that the $\prevsym$-arrow out of any
point $e$ goes back to the beginning of any $\nextsym$-arrow into $e$.
Of course this will not be possible if there is more than one
$\nextsym$-arrow into $e$.  So~\eqref{previnvnext} implies that at
most one $\next$-arrow can go into any point $e$.  Another way to say
this is that $\next$-arrows that go out from different points have to
go into different points:
\begin{equation}\label{next1to1}
\forall x,y.\, \nextsym(x) = \nextsym(y)\ \QIMPLIES\ x = y.
\end{equation}

So if a model satisfies~\eqref{previnvnext}, then it will
satisfy~\eqref{next1to1}.  In other words,
\[
\text{\eqref{previnvnext}} \QIMPIES\ \text{\eqref{next1to1}}
\]
is a \emph{valid formula}.

There are some standard terms called \emph{numerals} used to describe
the elements $e_0, e_1,\dots$ in \eqref{Ncopyshape}.  Namely, the
numeral for $e_0$ will be $\zerosym$, and the numeral for $e_n$ will
be the application of $\nextsym$ to $\zerosym$ $n$ times.
\iffalse
\[
\zerosym, \nextsym(\zerosym), \nextsym(\nextsym(\zerosym)),
\nextsym(\nextsym(\nextsym(\zerosym))), dots.
\]
\fi 

We'll refer to the numeral for $e_n$ as $\numerl{n}$.  For example,
$\numerl{3}$ is the numeral:
\[
\nextsym(\nextsym(\nextsym(\zerosym))).
\]


\iffalse
The values that a model gives to these numerals will be called its
\emph{numeral values}.  We will use the numeral values to be the
elements $e_0,e_1,\dots$ in the copy~\eqref{Ncopyshape} of $\naturals$
we are trying to create, with $e_n$ being the value of $\numerl{n}$.
\fi

But we don't quite have the desired situation pictured
in~\eqref{Ncopyshape}: there is nothing so far that prevents all the
numerals having the same value.  In other words, the formulas above do
not even imply that $\next(x) \neq x$.  (You should check this
yourself right now.)  We might try to fix this by requiring that no
$\next$-arrow can begin and end at the same element, but there still
could be a pair of elements, each of which was $\nextfun$ of the
other.  That is, the model might satisfy:
\[
\exists x, y.\, \nextsym(x) = y \QAND \nextsym(y) = x.
\]
We could go on to forbid a length two cycle of $\next$-arrows like
this, but then there might be a cycle of three:
\[
\exists x, y,z.\, \nextsym(x) = y \QAND\ \nextsym(y) = z \QAND\ \nextsym(z) = x\ ,
\]
and so on.  Fortunately, there is something we want to do anyway will
fix this problem: we haven't yet said anything that will make the
interpretion, $e_0$, of $\zerosym$ behave like zero.

\bparts

\ppart\label{zero-part} Write a predicate formula expressing the fact
that the value of $\zerosym$ not plus-one of anything.  Also, by
convention, subtracting one from zero has no effect.
\begin{solution}
\[
\QNOT(\exists x.\, \next(x) = \zerosym) \QAND
\prev(\zerosym) = \zerosym).
\]
\end{solution}
\eparts

Combining the formulas of part~\eqref{zero-part}
and~\eqref{previnvnext} now imply that the numeral values will yield
the copy~\eqref{Ncopyshape} of $\naturals$ we want.  All that's
needed is to show that the values of all the numerals are distinct.

\bparts

\ppart Explain why two different numerals must have different values
in any model satisfying~\eqref{previnvnext} and part~\eqref{zero-part}.

\begin{solution}
There are a couple of ways to confirm this claim, one using arrows and
the other well-ordering and the given formulas.

An arrow explanation goes as follows:
\begin{proof}
Suppose we start at the point denoted by $\zerosym$ and proceed to
generate a sequence of points by following successive $\next$-arrows
out of each point and into the next.  These points are, by definition,
the values of all the numerals.  But the formula of
part~\eqref{zero-part} implies that no no $\next$-arrow goes into the
starting point.  Also, no $\next$-arrow between points in the sequence
can go into any other earlier point in the sequence, because all the
earlier nonzero points already a $\next$-arrow going into it.  So each
$\next$-arrow goes into a new point and therefore no point has a
repeat occurrence.
\end{proof}

A more formal argument from formulas~\eqref{previnvnext} and
part~\eqref{zero-part} uses the Well Ordering Principle.
\begin{proof}
Suppose to the contrary that two different numerals had the same value
in some interpretation satisfying~\eqref{previnvnext} and
part~\eqref{zero-part}.  Then there is a minimum $n \in \naturals$
such that $\numerl{n}$ has the same value as numeral $\numnerl{m}$ for
some $n < m$.

But $n \neq 0$ because by part~\eqref{zero-part}, the interpretation
of $\numnerl{0}$ is not $\next$ of anything, while all the other
numerals are by definition $\next$ of the previous numeral.

Now with $n,m>0$ the interpretation
of the numerals will satisfy
\begin{align}
\prev(\numerl{n}) & \eqdef \prev(\next(\numerl{n-1}) = \numerl{n-1}
& \text{(by~\eqref{previnvnext})},\label{nneqn-1}\\
\prev(\numerl{m}) & \eqdef \prev(\next(\numerl{m-1}) = \numerl{m-1},
& \text{(by~\eqref{previnvnext})},\label{mmeqm-1}
\end{align}
So by~\label{nneqn-1},~\label{mmeqm-1}, the assumption that
$\numerl{n} = \numerl{m}$ is true in the model implies
\[
 \numerl{n-1} = \numerl{m-1}
\]
is also true, contradicting the minimality of $n$.

So the assumption leads to a contradiction, and we conclude that in
every model satisfying~\eqref{previnvnext} and part~\eqref{zero-part},
the numerals all have different values.\footnote{A careful look
at this argument reveals that for each $n\neq m \in \naturals$,
there is a direct proof that
  \[
  \QNOT(\numer{n} = \numer{m})
   \]
using part~\eqref{zero-part} once and~\eqref{previnvnext} $n$ times
\emph{without} appeal to Well Ordering.  This observation leads to the
conclusion that provability even in a very limited proof system with
just a few axioms and elementary logical rules, without Well Ordering
or Induction, is undecidable.}
\end{proof}
\end{solution}

At this point, we actually have ensured that any model satisfying just
the two formulas~\eqref{previnvnext} and~\eqref{zeronosuccessor} has
the desired copy of $\naturals$.






Now we will make $\nextsym$ act like the ``add one'' function on values
of these terms.  In particular, adding one to two different elements
will result in two different elements:
\begin{equation}\label{next1to1}
\forall x,y.\, x \neq y \QIMPLIES\ \nextsym(x) \neq \nextsym(y)\ .
\end{equation}
We also make $\prev$ act like the ``subtract one'' function on these
values, namely subtracting one from zero has no effect:
\begin{equation}\label{prev00}
\prev(\zerosym)= \zerosym,
\end{equation}
and otherwise adding one undoes subtracting one.

\bparts

Write a predicate formula expressing the requirement that adding one
undoes subtracting one from nonzero elements.
\begin{solution}
\begin{equation}\label{previnvnext}
\forall x.\, \prev(\nextsym(x)) = x\ .
\end{equation}




To start, we can introduce some abbreviations for certain terms called
\emph{numerals} built up using these symbols: namely, let
\begin{align*}
\numerl{1} & \eqdef \nextsym(\zerosym)\\
\numerl{2} & \eqdef \nextsym(\numerl{1})\\
\numerl{3} & \eqdef \nextsym(\numerl{2})\\
           &\vdots
\end{align*}

Now we will make $\nextsym$ act like the ``add one'' function on values
of these terms.  In particular, adding one to two different elements
will result in two different elements:
\begin{equation}\label{next1to1}
\forall x,y.\, x \neq y \QIMPLIES\ \nextsym(x) \neq \nextsym(y)\ .
\end{equation}
We also make $\prev$ act like the ``subtract one'' function on these
values, namely subtracting one from zero has no effect:
\begin{equation}\label{prev00}
\prev(\zerosym)= \zerosym,
\end{equation}
and otherwise adding one undoes subtracting one.

\bparts

\ppart\label{previnvnext-part} Write a predicate formula expressing
the requirement that adding one undoes subtracting one from nonzero elements.
\begin{solution}
\begin{equation}\label{previnvnext}
\forall x\neq \zerosym.\, \nextsym(\prev(x)) = x\ .
\end{equation}
\end{solution}

\iffalse
\ppart Write a formula expressing the fact that subtracting one from
two different nonzero elements will result in two different elements.

I was going to add ``Explain why this formula is implied the earlier
ones,'' but no time to check and problem long enough already.

\begin{solution}
\begin{equation}\label{prev1to1}
\forall x,y \neq \zerosym.\, x \neq y \QIMPLIES\ \prev(x) \neq \prev(y)\ .
\end{equation}
\end{solution}
\fi


\eparts

Now we are pretty much done: any interpretation that satisifies these
formulas must assign different domain elements to each of the
numerals, and interpretations of $\nextsym$ and $\prev$ must act like
plus one and minus one on these elements.

But although the values of the numerals in every model satisfying the
formulas of~\eqref{next1to1}, \eqref{prev00}, and
part~\eqref{previnvnext-part} form a copy of $\naturals$, a model may
have other elements that lead to strange behavior.  For example, a
model satisfying all the above formulas could have \emph{two} copies
that act like $\naturals$, with $\nextsym$ and $\prev$ acting like add
one and subtract one on each copy.  In this model, there would be two
elements that act like zero.

So let's fix this:
\bparts

\ppart Write a formula that forces there to be only one copy of
$\naturals$ in the model.

\begin{solution}
It's enough to say there is only one element that can start a copy:
\begin{equation}\label{uniqz}
\forall x.\, \prev(x) = x \QIMPLIES x = \zerosym.
\end{equation}
\end{solution}
\eparts

But there still might be other elements with funny properties.  For
example, there might be two elements, each of which was ``plus one''
of the other:
\[
\exists x, y.\, \nextsym(x) = y \QAND \nextsym(y) = x.
\]
or a cycle of three:
\[
\exists x, y,z.\, \nextsym(x) = y \QAND\ \nextsym(y) = z \QAND\ \nextsym(z) = x\ .
\]
We could easily write a formula forbidding such cycles of length
three, or forbidding cycles of any given length, but we would need an
infinite number of formulas to forbid cycles of all lengths.

To forbid all finite cycles using only a fixed number of formulas, we
will need something further: we will allow a relation symbol
$L(\ ,\ )$ and make it act like a less-than relation.  For this
purpose, it's suggestive to write $x\, L\, y$ instead of $L(x,y)$.
Then one requirement will be that for all $n,m \in \naturals$, if $n <
m$, then $\numerl{n}\, L\, \numerl{m}$ must be true.  But we also want
$L$ to define a relation that has the ``less-than'' properties on all
domain elements.  For example, we will say that adding one makes
numbers bigger with the formula
\begin{equation}\label{Lnext}
\forall x.\ x\,L\,\nextsym(x).
\end{equation}

\iffalse  CHECK THIS:
\bparts

\ppart Explain why the formulas above imply 
\begin{equation}\label{Lprev}
\forall x\neq \zerosym.\ \prev(x)\,L\,x\ .
\end{equation}

\begin{solution}
If $x\,L\,\nextsym(x)$ and $x \neq \zerosym$, then
\end{solution}
\eparts
\fi

Then we can forbid all finite cycles by requiring
\begin{equation}\label{irrform}
\forall x.\, \QNOT(x\, L\, x)\ .
\end{equation}

\bparts

\ppart Write down formulas of predicate calculus with only the symbols
above whose models must have properties as much like $\naturals$ as
you can manage.  In particular, make sure that all models of your
formulas force $L$ to mean $<$ on the numeral values and ensure
that~\eqref{irrform} implies there are no finite cycles of
$\nextsym$'s.  (If you think you have formulas whose only models are
exactly like $\naturals$, look again, because that is impossible.)

\begin{solution}
Assert that $L$ is \emph{transitive}
\[
\forall x,y,z.\, (x\,L\,y \QAND y\,L\,z) \QIMPLIES x\,L\,z,
\]

Further every two different elements are related by $L$ one way or the
other:
\begin{equation}\label{trichot}
\forall x,y.\, x\,L\,y \QOR y\,L\,x \QOR x = y.
\end{equation}

Now the only models of all these formulas has the a copy of
$\naturals$ along with some two-way infinite chains
\[
\dots c_{-2}\, L \, c_{-1}\, L\, c_0\, L\, c_1\, L\, c_2\, \dots.
\]

All the elements in one of these chains must be $L$-bigger than all
the numeral values.  Also,~\eqref{trichot} ensures all these chains
will have the property that every element of one chain will be $L$ of
every member of the other chain.  So the chains themselves are
``ordered'' by $L$, but there is nothing further that can be said of
how chains are ordered: there might be none, some finite number, or
even an infinite number of them.  And the chains might be ordered
among themselves like the integers, or nonnegative integers, or real
numbers,\dots.

\end{solution}

\ppart Describe a model that satisfies all your formulas but has
elements that are not the numeral values.

\begin{solution}
The numeral values along with a single two-way infinite chain of
successive elements ordered by $L$ is an example for the formulas
given above.
\end{solution}
\fi

\eparts

\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
