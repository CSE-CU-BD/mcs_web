\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_gambler_ruin_recurrences}
  \pcomment{revised from: S08.cp13m by ARM, 5/9/10}
\end{pcomments}

\pkeywords{
  probability
  expectation
  random_walk
  gamblers_ruin
  linear-recurrence
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
  A gambler is placing \$1 bets on the ``1st dozen'' in roulette.
  This bet wins when a number from one to twelve comes in, and then
  the gambler gets his \$1 back plus \$3 more.  Recall that there are
  38 numbers on the roulette wheel.

  The gambler's initial stake in $\$n$ and his target is $\$T$.  He
  will keep betting until he runs out of money (``goes broke'') or
  reachs his target.  Let $w_n$ be the probability of the gambler
  winning, that is, reaching target $\$T$ before going broke.

  \begin{problemparts} \problempart Write a linear recurrence for $w_n$; you need
  \emph{not} solve the recurrence.

  \begin{solution}
 The probability of winning a bet is $12/38$.  Thus, by the Law of
 Total Probability~\bref{total_prob_Ebar},
\begin{align*}
     w_n & = \prcond{\text{win starting with $\$n$}}{\text{won first bet}}
                \cdot \pr{\text{won first bet}} +
           \prcond{\text{win starting with $\$n$}}{\text{lost first bet}}
                \cdot\pr{\text{lost first bet}}\\
         & = \pr{\text{win starting with $\$n+3$}} \cdot \pr{\text{won first bet}} +
             \pr{\text{win starting with $\$n-1$}} \cdot \pr{\text{lost first bet}},
\end{align*}
so
    \[
    w_{n} = \frac{12}{38}w_{n+3} + \frac{26}{38}w_{n-1}.
    \]
Letting $m \eqdef n+3$ we get
    \[
    w_{m} = \frac{38}{12}w_{m-3} - \frac{26}{12}w_{m-4}.
    \]

\end{solution}

\begin{staffnotes}
\textcolor{blue}{these seem redundant---ARM}

  \problempart The following is intended to be an approximation of playing
  poker at a table with eight players.  Each bet is \$10.  You win
  \$70 with probability $1/8$.  You lose with probability $7/8$.

\begin{solution}

    \[ w_{n} = (1/8) w_{n+70} + (7/8) w_{n-10} \]
    which implies that
    \[ w_{n+70} = 8w_n - 7w_{n-10} \]
  
\end{solution}

  \problempart Suppose you play the same poker game, but you have to pay the
  dealer a ``rake'' of \$5 every time you win a hand.
  \begin{solution}

    All that happens is that you win \$65 instead of \$70.
    \[ w_{n+65} = 8w_n - 7w_{n-10} \]

\end{solution}

  \problempart What about if there's no rake, but the dealer charges \$1 for
  every hand regardless of whether you win or lose? (At casinos, this
  is called ``paying time.'' It's not actually every hand, but it's
  also usually more than \$1.)

\begin{solution}
    \[ w_{n+69} = 8w_n - 7w_{n-11} \]
\end{solution}

\end{staffnotes}

\problempart Let $e_n$ be the expected number of bets until the game ends.
Write a linear recurrence for $e_n$; you need \emph{not} solve the
recurrence.

\begin{solution}
By the Law of Total Expectation, Theorem~\bref{total_expect},
\begin{align*}
     e_n &= \paren{1+\expcond{\text{number of bets starting with $\$n$}}{\text{won first bet}}}
                 \cdot \pr{\text{won first bet}} +
           \paren{1+\expcond{\text{number of bets starting with $\$n$}}{\text{lost first bet}}}
                 \cdot \pr{\text{lost first bet}}\\
         &= \paren{1+\expect{\text{number of bets starting with $\$n+3$}}}
                 \cdot \pr{\text{won first bet}} +
            \paren{1+\expect{\text{number of bets starting with $\$n-1$}}}
                 \cdot \pr{\text{lost first bet}},
\end{align*}
so
  \[
  e_n = \paren{e_{n+3} +1}\frac{12}{38} + \paren{1+e_{n-1}}\frac{26}{38}
  \]
Letting $m \eqdef n+3$ we get
  \[
  e_m = \frac{38}{12}e_{m-3} - \frac{1-26/12}{26/12}\cdot e_{m-4} - \frac{38}{12}
  \]
\end{solution}

  \end{problemparts}
\end{problem}

\endinput
