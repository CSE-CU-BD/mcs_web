\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_gambler_unfair}
  \pcomment{from: S06.cp14m}
\end{pcomments}

\pkeywords{
  probability
  total_probability
  random_walk
  gamblers_ruin
  expectation
  play_forever
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


\begin{problem}
In gambler's ruin scenario, the gambler makes independent \$1 bets,
where the probability of winning a bet $p$ and of losing is $q \eqdef
1-p$.  The gambler keeps betting until he goes broke or reaches a
target of $T$ dollars.

Suppose $T=\infty$, that is, the gambler keeps playing until he goes
broke.
\begin{editingnoes}
(Now there may be a positive probability that he actually plays
  forever.)
\end{editingnotes}
Let $r$ be the probability that starting with $n>0$ dollars, the
gambler's stake ever gets reduced to $n-1$ dollars.

\bparts

\ppart
Explain why
\[
r = q+ pr^2.
\]

\begin{solution}
By Total Probability
\begin{align*}
r & = \prcond{\text{ever down \$1}}{\text{lose the first
   bet}}\pr{\text{lose the first bet}} +\\
 & \qquad \prcond{\text{ever down \$1}}{\text{win the first bet}}\pr{\text{win the first bet}}\\
   & = q +p\prcond{\text{ever down \$1}}{\text{win the first bet}}
\end{align*}
But
\begin{align*}
\lefteqn{\prcond{\text{ever down \$1}}{\text{win the first bet}}}\\
  & = \pr{\text{ever down \$2}}\\
  & = \pr{\text{being down the first \$1}}
        \pr{\text{being down another \$1}}\\
  & = r^2.
\end{align*}

\end{solution}

\ppart
Conclude that if $p \leq 1/2$, then $r=1$.

\begin{editingnoes}
\[
r =  \begin{cases}
        1           & \text{if $p \leq 1/2$},\\
        \frac{q}{p} & \text{if $p > 1/2$}.
\end{cases}
\]
\end{editingnotes}

\begin{solution}

$pr^2-r+q$ has roots $q/p$ and 1.  So $r=1$ or $r=q/p$.  But $r \leq 1$,
which implies $r=1$ when $q/p \geq 1$, that is, when $p \leq 1/2$.

In fact $r = q/p$ when $q/p < 1$, namely, when $p > 1/2$, but this
requires an additional argument that we omit.

\end{solution}

\ppart Conclude that even in a fair game, the gambler is sure to get
ruined \emph{no matter how much money he starts with}!

\begin{solution}
The gambler gets ruined starting with initial stake $n=1$
precisely if his initial stake goes down by 1 dollar, so his probability
of ruin is $r$, which equals 1 in the fair case.

The recurrence~\eqref{recab} will also hold in this $T=\infty$ case if we
interpret $w_n$ as the probability of \emph{not} being ruined, that is,
the gambler wins if he can gamble forever.  So $w_1$ is the probability he
is \emph{not} getting ruined starting with a 1 dollar stake, that is $w_1
= 1-r = 0$.  Since $w_0 = 0 = w_1$, the recurrence implies that $w_n=0$
for all $n \geq 0$.
\end{solution}

\ppart  Let $t$ be the expected time for the gambler's stake to go down by
1 dollar.  Verify that
\[
t = q + p(1+2t).
\]
Conclude that starting with a 1 dollar stake in a fair game, the gambler
can expect to play forever!

\begin{solution}
By Total Expectation
\begin{align*}
t & = \expcond{\text{\#steps to be down \$1}}{\text{lose the first
   bet}}\pr{\text{lose the first bet}} +\\
 & \qquad \expcond{\text{\#steps to be down \$1}}{\text{win the first bet}}\pr{\text{win the first bet}}\\
   & = q +p\expcond{1 + \text{\#steps to be down \$1}}{\text{win the first bet}}.
\end{align*}
But
\begin{align*}
\lefteqn{\expcond{\text{\#steps to be down \$1}}{\text{win the first
 bet}}}\\
  & = \expect{\text{\#steps to be down \$2}}\\
  & = \expect{\text{\#steps to be down the first \$1}}
      + \expect{\text{\#steps to be down another \$1}}\\
  & = 2t.
\end{align*}
This implies the required formula $t = q + p(1+2t)$.  If $p=1/2$ we
conclude that $t=1+t$, which means $t$ must be infinite.

\end{solution}

\eparts

\end{problem}

\endinput
