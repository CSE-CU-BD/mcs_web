\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{CP_bijecting_bijections}
  \pcomment{by orm, 4/7/11}
  \pcomment{minor edit by ARM 4/8/11, 2/18/13}
\end{pcomments}

\pkeywords{
  counting
  bijection
  product rule
  permutations
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
\iffalse
The following problems give you an idea of how many relations and
functions there are given two sets.
\fi

Let $X$ and $Y$ be finite sets.

\bparts

\ppart How many binary relations from $X$ to $Y$ are there?

\begin{solution}
The set of all pairs $X\times Y$ has $\card{X} \cdot \card{Y}$
elements.  Any subset of $X\times Y$ can be the graph of a relation,
hence there are $2^{\card{X} \cdot \card{Y}}$ relations.
\end{solution}

\ppart Define a bijection between the set $[X\to Y]$ of all total
functions from $X$ to $Y$ and the set $Y^{\card{X}}$.  (Recall $Y^n$
is the cartesian product of $Y$ with itself $n$ times.)  Based on
that, what is $\card{\,[X\to Y]\,}$?

\begin{solution}
We can encode a given function from $X$ to $Y$ by first giving an
ordering to elements in $X$, say, calling them $x_1$, $x_2$, $\dots$,
$x_{\card{X}}$.

Now given an element $f \in [X\to Y]$ we can associate it with and
element $g \in Y^{\card{X}}$ by following the rule $g[i] = f(x_i)$, where
$g[i]$ is the $i$th entry of the vector.

This is a total, bijective function, since it is defined for every $f
\in [X \to Y]$.  It is also surjective and injective, as we show next.

To prove it is surjective, suppose $(y_1, y_2, y_3,\dots,y_{\card{X}})
\in Y^{\card{X}}$.  Now, the function $h \in X$ with $h(x_i) \eqdef
y_i$ will map to it under our definition.  To prove it is injective,
suppose $g,h \in X$ map to the same vector $(y_1, y_2,
y_3,\dots,y_{\card{X}}) \in Y^{\card{X}} $.  Then based on our rule we
know $g(x_i) = y_i = h(x_i)$ for all $x_i \in X$.  Hence $g = h$.

Based on this bijection we can easily count the number of total
functions $[X\to Y]$ by counting the elements of $Y^{\card{X}}$.
Since we know how to count cartesian products, we know the answer is
$\card{Y}^{\card{X}}$.  For this reason, many books use the notation
$Y^X$ in place of $[X\to Y]$.
\end{solution}

\ppart Using the previous part how many {\em functions}, not
necessarily total, are there from $X$ to $Y$?  How does the fraction
of functions vs. total functions grow as the size of $X$ grows?  Is it
$O(1)$, $O(\card{X})$, $O(2^{\card{X}})$,\dots?

\begin{solution}
We can model this by adding a dummy element to $Y$, which indicates
whether a given $x\in X$ has an actual image or not.  After using the
previous part, we get there are $(\card{Y}+1)^{\card{X}}$ functions,
not necessarily total.  By taking the ratio of this answer and the
previous questions, we see the ratio is
\[
\paren{\frac{\card{Y}+1}{\card{Y}}}^{\card{X}}
\]
so it is not $O(1)$ nor $O(\card{X})$ but exponential in $\card{X}$.
Also, since $\card{Y} + 1 \leq 2\card{Y}$, then the ratio above is
indeed $O(2^{\card{X}})$
\end{solution}

\ppart Show a bijection between the powerset, $\power(X)$, and the
set $[X \to \set{0,1}]$ of 0-1-valued total functions on $X$.

\begin{solution}
Consider bijection $b: \power(X) \to [X\to \set{0,1}]$ defined as
follows.  For $s\in \power(X)$, then let $b_s(x_i) \eqdef 1$ iff $x_i
\in S$.  We make $b_s(x_i) \eqdef 0$ otherwise.  It can be shown this
correspondence is a bijection. Firstly, to show it is injective, we
can consider two different elements in $\power(X)$, call them $s_1$
and $s_2$. According to the definition, these two are distinct sets
with all their elements in $X$. Therefore we can assume without losing
generality there is an $x_0\in s_1$ but $x_0 \not \in s_2$. So
according to our mapping $b_{s_1}(x_0) = 1$ but $b_{s_2}(x_0)= 0$, so
the two functions are not equal.  Now we need to show it is
surjective, and we know this is the case because given any such binary
function, we can construct a subset of X that maps to it. Namely, $\{x
\in X | f(x) = 1\}$.

This and the previous part show why $\power(x)$ is sometimes denoted
as $2^X$.
\end{solution}

\ppart Let $X \eqdef \set{1, 2, \dots, n}$.  In this problem we count
how many bijections there are from $X$ to itself.  Consider the set
$B_{X,X}$ of all {\em bijections} from set $X$ to set $X$.  Show a
bijection from $B_{X,X}$ to the set of all permuations of $X$ (as
defined in the notes).  Using that, count $B_{X,X}$.

\begin{solution}

The main idea is we can encode a bijective function from $X$ to $X$
with an ordered list.  For example, if we let $X = \set{1,2,3}$, the
function $f:X\to X$ with $f(1) \eqdef 3$, $f(2) \eqdef 1$ and $f(3)
\eqdef 2$ is bijective.  We can encode it as $(3,\, 1,\, 2)$. In this
case $f(i) = v_i$.

This is a valid bijection, because if we have an arbitrary bijective
function we can always write down its images in order, and two
different bijections will have a different image. Also, given an
ordered list, we can reconstruct a bijection which when encoded
produces the list.
\iffalse
In many other contexts, a permutation is defined as a bijection from a
set to itself rather than as an ordered list of non repeating
elements.  Now you know why the two definitions are equivalent.
\fi

\end{solution}


\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
