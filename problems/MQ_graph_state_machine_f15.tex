\documentclass[problem]{mcs}

\begin{pcomments}
  \pcomment{MQ_graph_state_machine_f15}
  \pcomment{variant of MQ_graph_state_machine}
  \pcomment{Proposed by ZDz for Miderm 3 in F15}
\end{pcomments}

\pkeywords{
graphs
state_machines
connectivity
well_order
termination
partial_correctness
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem starts here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{problem}
Starting with some \textbf{simple graph} $G$ with two or more
vertices, keep applying the following operations: pick two vertices $u
\neq v$ such that either
\begin{enumerate}

\item\label{deleteedgeuv} there is an edge between $u$ and $v$, and there is also a path
from $u$ to $v$ which does \emph{not} include this edge; in this case,
delete the edge $\edge{u}{v}$.

\item\label{addedgeuv} there is no path from $u$ to $v$; in this case, add the edge
  $\edge{u}{v}$.
\end{enumerate}
Continue until it is no longer possible to find two vertices $u \neq
v$ to which an operation applies.

\bparts

\ppart Let $c$ be the number of connected components and $e$ the
number of edges of a simple graph.  Prove that 
\[
2c+e
\]
is a strictly decreasing derived variable of this process.

\examspace[1.5in]

\begin{solution}
Operation~\ref{deleteedgeuv} decrease $e$ by one and leaves $c$
unchanged since $u$ and $v$ remain connected.  So $2c+e$ decreases by
one.

Operation~\ref{addedgeuv} decreases $c$ by one since the two connected
components it connects become a single component.  It increases $e$ by
one.  So $2c+e$ changes by $-(2\cdot 1 +1$, namely it decreases by
one.
\end{solution}

\ppart Conclude that starting from any graph, $G$, the procedure above
terminates.

\examspace[0.5in]

\begin{solution}
Since $2c+e$ is a nonnegative integer-valued variable, so
Theorem~\bref{th:decr} implies termination.
\end{solution}

\ppart Prove that when the procedure terminates, the remaining graph is a tree.

\examspace[2in]

\begin{solution}
We use the characterization of a tree as a cycle-free, connected,
simple graph.

A final graph must be connected, because otherwise there would be two
vertices with no path between them, and then a transition adding the edge
between them would be possible.

A final graph can't have a cycle, because deleting any edge on the
cycle would be a possible operation.
\end{solution}

%\ppart
%
%Let $G$ be the graph with vertices $\set{1,2,3,4}$ and edges
%\[
%\set{\set{1,2},\set{3,4}}
%\]
%How many possible final states are reachable from start state
%$G$? \hfill \examrule{1in}
%
%\begin{solution}It's not possible to delete any edge.  The procedure can only
%add an edge connecting exactly one of vertices 1 or 2 to exactly one of
%vertices 3 or 4, and then terminate.  So there are four possible final
%states.
%\end{solution}
%
%\ppart
%\label{derived} On the line next to each of the derived
%state variables below, indicate the \emph{strongest} property from the
%list below that the variable is guaranteed to satisfy, no matter what the
%starting graph $G$ is.  The properties are:
%\begin{center}
%\begin{tabular}{ccc}
%\emph{constant} & \emph{increasing} & \emph{decreasing}\\
%\emph{nonincreasing} & \emph{nondecreasing} & \emph{none of these}
%\end{tabular}
%\end{center}
%
%For any state, let $e$ be the number of edges in it, and let $c$ be the
%number of \textbf{connected components} it has.  Since $e$ may increase or
%decrease in a transition, it does not have any of the first four
%properties.  The derived variables are:
%\begin{enumerate}
%
%\item[0)] $e$ \hfill \underline{\emph{none of these}}
%
%
%\item[i)] $c$ \hfill \examrule{1.0in}
%
%\begin{solution}
%nonincreasing
%\end{solution}
%
%\item[ii)]  $c+e$ \hfill \examrule{1.0in}
%
%\begin{solution}
%nonincreasing
%\end{solution}
%
%\item[iii)] $2c+e$ \hfill \examrule{1.0in}
%
%\begin{solution}
%decreasing
%\end{solution}
%
%\begin{editingnotes}
%USABLE ONLY IF LEXICOGRAPHIC ORDER IS BACK IN TEXT
%\item[iv)] $(c,e)$, under the \textbf{lexicographic order} on $\naturals \cross \naturals$.
%\hfill \examrule{1.0in}
%\end{editingnotes}
%
%\item[iv)] $c+\frac{e}{e+1}$
%\hfill \examrule{1.0in}
%
%\begin{solution}
%decreasing
%\end{solution}
%
%\end{enumerate}
%
%\ppart
%Explain why, starting from any state, $G$, the procedure
%terminates.  If your explanation depends on answers you gave to part~(b),
%you must justify those answers.
%
%\begin{solution}
%The derived variable iii) is a natural-number valued variable and is
%decreasing, so by Theorem~\bref{th:decr}, the procedure must terminate.
%
%\emph{Alternative answer}: derived variable iv) is decreasing, and its
%values are all in the set $\naturals + \twdone$ shown in
%Section~\bref{to1_well-order} to be a well ordered set of real
%numbers.
%
%\begin{editingnotes}
%under the lexicographic order on $\naturals \cross \naturals$
%which we know from Problem Set 6 is a well ordered set.
%\end{editingnotes}
%
%To show that the variable iii) decreases, note that the rule for
%deleting an edge ensures that the connectedness relation does not change,
%so neither does the number of connected components; therefore the variable
%decreases by one when an edge is deleted.  The rule for adding an edge
%ensures that the number of connected components decreases by one, so the
%variable changes by $-2$ for the reduced number of components and $+1$ for
%the added edge, for a net decrease of 1.
%
%Variable iv) decreases when an edge is deleted and the number of
%components stays the same.   The rule for adding an edge
%ensures that the number of connected components decreases by one, so the
%variable changes by $-1$ for the reduced number of components and
%increases by an amount $(e+1)/(e+2) - e/(e+1) < 1$ for
%the added edge, for a net decrease.
%\end{solution}
%
%\ppart Prove that any final state must be an \textbf{unordered tree}
%on the set of vertices, that is, a spanning tree.
%
%\begin{solution}
%We use the characterization of a tree as a cycle-free,
%connected, simple graph.
%
%A final state must be connected, because otherwise there would be two
%vertices with no path between them, and then a transition adding the edge
%between them would be possible, contradicting finality of the state.
%
%A final state can't have a cycle, because deleting any edge on the
%cycle would be a possible transition.
%\end{solution}

\eparts
\end{problem}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problem ends here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\endinput
