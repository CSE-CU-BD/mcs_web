\documentclass[handout]{mcs}

\begin{document}

\inclassproblems{14, Wed.}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problems start here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\pinput{CP_random_walk_stationary_distributions}
\pinput{CP_simple_google_graph}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Problems end here
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{Appendix}
\newcommand{\vout}[1]{\text{out}(#1)}
\newcommand{\vin}[1]{\text{in}(#1)}
\newcommand{\odeg}[1]{\text{out-degree}(#1)}
\newcommand{\ideg}[1]{\text{in-degree}(#1)}

A \term{random-walk graph} is a digraph such that each edge,
$\diredge{x}{y}$, is labelled with a number, $p(x,y) > 0$, which will
indicate the probability of following that edge starting at vertex $x$.
Formally, we simply require that the sum of labels leaving each vertex is
1.  That is, if we define for each vertex, $x$,
\[
\vout{x} \eqdef \set{y \suchthat \diredge{x}{y} \text{ is an edge of the
    graph}},
\]
then
\[
\sum_{y \in \vout{x}} p(x,y) = 1.
\]

A \term{distribution}, $d$, is a labelling of each vertex, $x$, with a
number, $d(x) \geq 0$, which will indicate the probability of being at $x$.
Formally, we simply require that the sum of all the vertex labels is 1,
that is,
\[
\sum_{x \in V} d(x) = 1,
\]
where $V$ is the set of vertices.

The distribution, $\widehat{d}$, \term{after a single step} of a random walk from
distribution, $d$, is given by
\[
\widehat{d}(x) \eqdef \sum_{y \in \vin{x}} d(y) \cdot p(y,x),
\]
where
\[
\vin{x} \eqdef \set{y \suchthat \diredge{y}{x} \text{ is an edge of the
    graph}}.
\]

A distribution $d$ is \term{stationary} if $\widehat{d} = d$, where 
$\widehat{d}$ is the distribution after a single step of a random walk
starting from $d$.
In other words, $d$ stationary implies
\[
d(x) \eqdef \sum_{y \in \vin{x}} d(y) \cdot p(y,x).
\]


\end{document}

\begin{problem}
  For the following gambling problems, use $w_n$ as the
  probability of reaching target \$$T$ before going broke,
  when starting from \$$n$.  

  Give recurrences for each of the following scenarios.  
  \bparts
  \ppart Placing \$1 bets on the ``1st dozen'' in roulette.
  This bet wins when a number $1,2,\ldots,12$ comes in and pays \$$2$.
  Recall that there are $38$ numbers on the roulette wheel.

  \solution{ The probability of winning a bet is $12/38$.  Thus, we
    have 
    \[ w_{n} = (26/38)w_{n-1} + (12/38)w_{n+2} \ , \]
    which implies
    \[ w_{n+2} = (38/12)w_n - (26/12)w_{n-1} \ . \]
  }
  
  \ppart The following is intended to be an approximation of playing
  poker at a table with eight players.  Each bet is \$10.  You win
  \$70 with probability $1/8$.  You lose with probability $7/8$.  

  \solution{
    \[ w_{n} = (1/8) w_{n+70} + (7/8) w_{n-10} \]
    which implies that
    \[ w_{n+70} = 8w_n - 7w_{n-10} \]
  }
  
  \ppart Suppose you play the same poker game, but you have to pay the
  dealer a ``rake'' of \$5 every time you win a hand.
  \solution{
    All that happens is that you win \$65 instead of \$70. 
    \[ w_{n+65} = 8w_n - 7w_{n-10} \]
  }
    
  \ppart What about if there's no rake, but the dealer charges \$1 for
  every hand regardless of whether you win or lose? (At casinos, this
  is called ``paying time.'' It's not actually every hand, but it's
  also usually more than \$1.) 
  \solution{
    \[ w_{n+69} = 8w_n - 7w_{n-11} \]
  }
  \eparts
\end{problem}
