\chapter{The Well Ordering Principle}\label{well_ordering_chap}

\textbox{
\centerline{Every \emph{nonempty} set of \emph{nonnegative integers} has a
\emph{smallest} element.}
}

This statement is known as The \term{Well Ordering Principle}.  Do you
believe it?  Seems sort of obvious, right?  But notice how tight it is: it
requires a \emph{nonempty} set ---it's false for the empty set which has
\emph{no} smallest element because it has no elements at all!  And it
requires a set of \emph{nonnegative} integers ---it's false for the set of
\emph{negative} integers and also false for some sets of nonnegative
\emph{rationals} ---for example, the set of positive rationals.  So, the
Well Ordering Principle captures something special about the nonnegative
integers.

\section{Well Ordering Proofs}

While the Well Ordering Principle may seem obvious, \iffalse it looks
nothing like the induction axiom, and\fi it's hard to see offhand why it
is useful.  But in fact, it provides one of the most important proof rules
in discrete mathematics.  \iffalse We'll explain this after we introduce a
template for well ordering principle proofs resembling the template in
Section~\ref{templ-induct-proofs} for a proof by strong induction.\fi

In fact, looking back, we took the Well Ordering Principle for granted
in proving that $\sqrt{2}$ is irrational.  That proof assumed that for
any positive integers $m$ and $n$, the fraction $m/n$ can be written
in \term{lowest terms}, that is, in the form $m'/n'$ where $m'$ and
$n'$ are positive integers with no common prime factors.  How do we
know this is always possible?

Suppose to the contrary that there are positive integers $m$ and $n$
such that the fraction $m/n$ cannot be written in lowest terms.  Now
let $C$ be the set of positive integers that are numerators of such
fractions.  Then $m \in C$, so $C$ is nonempty.  Therefore, by Well
Ordering, there must be a smallest integer, $m_0 \in C$.  So by
definition of $C$, there is an integer $n_0 > 0$ such that
\[
\text{the fraction } \frac{m_0}{n_0} \text{ cannot be written in lowest
terms.}
\]
This means that $m_0$ and $n_0$ must have a common prime factor,
$p>1$.  But
\[
\frac{m_0/p}{n_0/p} = \frac{m_0}{n_0},
\]
so any way of expressing the left hand fraction in lowest terms would also
work for $m_0/n_0$, which implies
\[
\text{the fraction } \frac{m_0/p}{n_0/p} \text{ cannot be in written in
lowest terms either.}
\]
So by definition of $C$, the numerator, $m_0/p$, is in $C$.  But $m_0/p <
m_0$, which contradicts the fact that $m_0$ is the smallest element of $C$.

Since the assumption that $C$ is nonempty leads to a contradiction, it
follows that $C$ must be empty.  That is, that there are no numerators of
fractions that can't be written in lowest terms, and hence there are no
such fractions at all.

We've been using the Well Ordering Principle on the sly from early on!

\section{Template for Well Ordering Proofs}

More generally, there is a standard way to use Well Ordering to prove that
some property, $P(n)$ holds for every nonnegative integer, $n$.  Here is a
standard way to organize such a well ordering proof:
\textbox{
To prove that ``$P(n)$ is true for all $n\in \naturals$'' using
the Well Ordering Principle:
\begin{itemize}

\item Define the set, $C$, of \emph{counterexamples} to $P$ being
  true.  Namely, define
\[
C \eqdef \set{n\in\naturals \suchthat P(n) \text{ is false}}.
\]
(The notation $\set{n \suchthat P(n)}$ means ``the set of all elements
$n$, for which $P(n)$ is true,'' see Section~\ref{set_builder_sec}.)

\item Assume for proof by contradiction that $C$ is nonempty.

\item By the Well Ordering Principle, there will be a smallest
      element, $n$, in $C$.

\item Reach a contradiction (somehow) ---often by showing how to use $n$
to find another member of $C$ that is smaller than $n$.  (This is the
open-ended part of the proof task.)

\item Conclude that $C$ must be empty, that is, no counterexamples exist. \qed
\end{itemize}
}

\subsection{Summing the Integers}
Let's use this template to prove %Theorem~\ref{th:sum-to-n}. 

\begin{theorem}  \label{sum_to_n_thm}
\begin{equation}\label{sum1n}
1 + 2 + 3 + \cdots + n = n(n+1)/2
\end{equation}
for all nonnegative integers, $n$.
\end{theorem}

First, we'd better address a couple of ambiguous special
cases before they trip us up:
\begin{itemize}
\item If $n = 1$, then there is only one term in the summation, and so $1
  + 2 + 3 + \cdots + n$ is just the term 1.  Don't be misled by the
  appearance of 2 and 3 and the suggestion that $1$ and $n$ are distinct
  terms!
\item If $n \leq 0$, then there are no terms at all in the summation.  By
convention, the sum in this case is 0.
\end{itemize}
So, while the three dots notation, which is called an \term{ellipsis},
is convenient, you have to watch out for these special cases where the
notation is misleading.  In fact, whenever you see an ellipsis, you
should be on the lookout to be sure you understand the pattern,
watching out for the beginning and the end.

We could have eliminated the need for guessing by rewriting the left side
of~\eqref{sum1n} with \term{summation notation}:
\[
\sum_{i=1}^n i
\qquad \text{or} \qquad
\sum_{1 \leq i \leq n} i.
\]
Both of these expressions denote the sum of all values taken by the
expression to the right of the sigma as the variable, $i$, ranges from
1 to $n$.  Both expressions make it clear what~\eqref{sum1n} means
when $n=1$.  The second expression makes it clear that when $n=0$,
there are no terms in the sum, though you still have to know the
convention that a sum of no numbers equals 0 (the \emph{product} of no
numbers is 1, by the way).

OK, back to the proof:
\begin{proof}
By contradiction.  Assume that Theorem~\ref{sum_to_n_thm} is
\emph{false}.  Then, some nonnegative integers serve as
\emph{counterexamples} to it. Let's collect them in a set:
\[
C \eqdef \set{n\in\naturals \suchthat 
        1 + 2 + 3 + \cdots + n \neq \frac{n(n+1)}{2}}.
\]
Assuming there are counterexamples, $C$ is a nonempty set of
nonnegative integers.  So, by the Well Ordering Principle, $C$ has a
minimum element, which we'll call $c$.  That is, among the nonnegative
integers, $c$ is the \emph{\idx{smallest counterexample}} to
equation~\eqref{sum1n}.

Since $c$ is the smallest counterexample, we know that~\eqref{sum1n} is
false for $n=c$ but true for all nonnegative integers $n<c$.
But~\eqref{sum1n} is true for $n=0$, so $c > 0$.  This means $c-1$ is a
nonnegative integer, and since it is less than $c$, equation~\eqref{sum1n}
is true for $c-1$.  That is,
\[
        1 + 2 + 3 + \cdots + (c-1) = \frac{(c-1)c}{2}.
\]
But then, adding $c$ to both sides, we get
\[
1 + 2 + 3 + \cdots + (c-1) + c 
        = \frac{(c-1)c}{2} + c
        = \frac{c^2 - c + 2c}{2} 
        = \frac{c(c+1)}{2},
\]
which means that~\eqref{sum1n} does hold for $c$, after all!  This is a
contradiction, and we are done.
\end{proof}


\begin{problems}
\practiceproblems
\pinput{TP_10_and_15_cent_stamps_by_WOP}
\pinput{TP_bogus_well_ordering_fibonacci_proof}
\pinput{TP_lowest_terms}

\classproblems
\pinput{CP_sum_of_squares}
%\pinput{CP_6_and_15_cent_stamps_by_WOP}
\pinput{CP_like_Lehmans_equation}

\homeworkproblems
\pinput{PS_3_and_5_postage_by_WOP}
\pinput{PS_Lehmans_equation}

\examproblems
\pinput{MQ_10_and_15_cent_stamps_by_WOP}
\pinput{MQ_wop_proof_sumofodds}
%\pinput{MQ_wop_proof_sumofevens}
\end{problems}

\section{Factoring into Primes}

We've previously taken for granted the \term{Prime Factorization
  Theorem}, which states that every integer greater than one has a
unique\footnote{\dots unique up to the order in which the prime
  factors appear} expression as a product of prime numbers.  This is
another of those familiar mathematical facts which are not really
obvious.  We'll prove the uniqueness of prime factorization in a later
chapter, but well ordering gives an easy proof that every integer
greater than one can be expressed as \emph{some} product of primes.

\begin{theorem}\label{factor_into_primes}
Every positive integer greater than one can be factored as a product of primes.
\end{theorem}
\begin{proof}
The proof is by Well Ordering.

Let $C$ be the set of all integers greater than one that cannot be
factored as a product of primes.  We assume $C$ is not empty and derive a
contradiction.

If $C$ is not empty, there is a least element, $n \in C$, by Well
Ordering.  The $n$ can't be prime, because a prime by itself is considered
a (length one) product of primes and no such products are in $C$.

So $n$ must be a product of two integers $a$ and $b$ where $1<a,b<n$.
Since $a$ and $b$ are smaller than the smallest element in $C$, we know
that $a,b \notin C$.  In other words, $a$ can be written as a product of
primes $p_1p_2\cdots p_k$ and $b$ as a product of primes $q_1\cdots q_l$.
Therefore, $n=p_1\cdots p_k q_1 \cdots q_l$ can be written as a product of
primes, contradicting the claim that $n \in C$.  Our assumption that $C$
is not empty must therefore be false.
\end{proof}

\section{Well Ordered Sets}\label{well_ordering_sec}

A set of numbers is \term{well ordered} when each of its nonempty
subsets has a minimum element.  The Well Ordering principle says, of
course, that the set of nonnegative integers is well ordered, but so
are lots of other sets, such as the set $r\naturals$ of numbers
of the form $rn$, where $r$ is a positive real number and $n \in
\naturals$.

Well ordering commonly comes up in Computer Science as a method for
proving that computations won't run forever.  The idea is to assign a
value to the successive steps of a computation so that the values get
smaller at every step.  If the values are all from a well ordered set,
then the computation can't run forever, because if it did, the values
assigned to its successive steps would define a subset with no minimum
element.  You'll see several examples of this technique applied in
Section~\ref{state_machine_sec} to prove that various \idx{state
  machines} will eventually terminate.

Notice that a set may have a minimum element but not be well ordered.
The set of nonnegative rational numbers is an example: it has a
minimum element, namely zero, but it also has nonempty subsets that
don't have minimum elements---the \emph{positive} rationals, for
example.

The following theorem is a tiny generalization of the Well Ordering
Principle.

\begin{theorem}\label{int_lower_bound}
For any nonnegative integer, $n$, the set of integers greater than or equal to $-n$
is well ordered.
\end{theorem}

This theorem is just as obvious as the Well Ordering Principle, and it
would be harmless to accept it as another axiom.  But repeatedly
introducing axioms gets worrisome after a while, and it's worth
noticing when a potential axiom can actually be proved.  We can easily
prove Theorem~\ref{int_lower_bound} using the Well Ordering Principle:

\begin{proof}
Let $S$ be any nonempty set of integers $\geq -n$.  Now add $n$ to
each of the elements in $S$; let's call this new set $S+n$.  Now $S+n$
is a nonempty set of \emph{nonnegative} integers, and so by the Well
Ordering Principle, it has a minimum element, $m$.  But then it's easy
to see that $m - n$ is the minimum element of $S$.
\end{proof}

The definition of well ordering implies that \emph{every} subset of a
well ordered set is well ordered, and this yields two convenient,
immediate corollaries of Theorem~\ref{int_lower_bound}:

\begin{definition}
A \term{lower bound} (respectively, \term{upper bound}) for a set,
$S$, of real numbers is a number, $b$, such that $b \leq s$
(respectively, $b \geq s$) for every $s \in S$.
\end{definition}
Note that a lower or upper bound of set $S$ is not required to be in
the set.

\begin{corollary}\label{lower_bound_cor}
Any set of integers with a lower bound is well ordered.
\end{corollary}

\begin{proof}
A set of integers with a lower bound $b \in \reals$ will also have the
integer $n = \floor{b}$ as a lower bound, where $\floor{b}$, called
the \text{floor} of $b$, is gotten by rounding down $b$ to the nearest
integer.  So Theorem~\ref{int_lower_bound} implies the set is well
ordered.
\end{proof}

%Another obvious corollary confirms the existence of \emph{maximum} elements:

\begin{corollary}\label{upper_bound_cor}
Any nonempty set of integers with an upper bound has a maximum
element.
\end{corollary}

\begin{proof}
Suppose a set, $S$, of integers has an upper bound $b \in \reals$.
Now multiply each element of $S$ by -1; let's call this new set of
elements $-S$.  Now, of course, $-b$ is a lower bound of $-S$.  So
$-S$ has a minimum element $-m$ by Corollary~\ref{lower_bound_cor}.
But then it's easy to see that $m$ is the maximum element of $S$.
\end{proof}


\subsection{A Different Well Ordered Set}
\begin{optional}
Another example of a well ordered set of numbers is the set $\twdone$ of
fractions increasing to the limit 1:
\[
\frac01, \frac12, \frac23, \frac34, \dots, \frac{n}{n+1}, \dots.
\]
The minimum element of any nonempty subset of $\twdone$ is simply the one
with the minimum numerator when expressed in the form $n/(n+1)$. 

Now we can define a very different well ordered set by adding
nonnegative integers to numbers in $\twdone$.  That is, we take all
the numbers of the form $n + f$ where $n$ is a nonnegative integer and
$f$ is a fraction in $\twdone$.  Let's call this set of numbers ---you
guessed it ---$\naturals + \twdone$.  There is a simple recipe for
finding the minimum number in any nonempty subset of $\naturals +
\twdone$, which explains why this set is well ordered:

\begin{lemma}\label{to1_well-order}
$\naturals + \twdone$ is well ordered.
\end{lemma}

\begin{proof}
Given any nonempty subset, $S$, of $\naturals + \twdone$, look at all
the nonnegative integers, $n$, such that $n+f$ is in $S$ for some $f
\in \twdone$.  This is a nonempty set nonnegative integers, so by the
WOP, there is a minimum one; call it $n_s$.

By definition of $n_s$, there is some $f \in \twdone$ such that
$n_S+f$ is in the set $S$.  So the set all fractions $f$ such that
$n_S+f \in S$ is a nonempty subset $\twdone$, and since $\twdone$ is
well ordered, this nonempty set contains a minimum element; call it
$f_S$.  Now, using the fact that every fraction $f \in twdone$ is a
nonnegative number less than 1, it easy to verify that $n_S+f_S$ is
the minimum element of $S$.
\end{proof}

The set $\naturals + \twdone$ is different from the earlier examples.
In all the earlier examples, each element was greater than
only a finite number of other elements.  In $\naturals + \twdone$, every
element greater than or equal to 1 can be the first element in
strictly decreasing sequences of elements of arbitrary finite length.
For example, the following decreasing sequences of elements in
$\naturals + \twdone$ all start with 1:
\[\begin{array}{l}
1, 0.\\
1, \frac12, 0.\\
1, \frac23, \frac12, 0.\\
1,  \frac34, \frac23, \frac12, 0.\\
\qquad\vdots
\end{array}\]
Nevertheless, since $\naturals + \twdone$ is well ordered, it is
impossible to find an infinite decreasing sequence of elements in
$\naturals + \twdone$, because the set of elements in such a sequence
would have no minimum.

\end{optional}

\begin{problems}
  \practiceproblems
  \pinput{TP_well_order_examples}
  \pinput{TP_min_of_finite_WOP}

  \classproblems
  \pinput{CP_well_order_decreasing}

\end{problems}
\endinput


